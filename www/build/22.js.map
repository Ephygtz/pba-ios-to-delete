{"version":3,"sources":["../../src/pages/merchant/merchant.module.ts","../../src/pages/merchant/merchant.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MerchantPage } from './merchant';\n\n@NgModule({\n  declarations: [\n    MerchantPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MerchantPage)\n  ],\n})\nexport class MerchantPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/merchant/merchant.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ModalController, NavParams } from 'ionic-angular';\nimport { GlobalVarsProvider } from '../../providers/global-vars/global-vars';\nimport { AlertServiceProvider } from '../../providers/alert-service/alert-service';\nimport { ClientdataProvider } from '../../providers/clientdata/clientdata';\nimport { ContactsProvider } from '../../providers/contacts/contacts';\nimport Format from 'string-format';\n\n@IonicPage()\n@Component({\n  selector: 'page-merchant',\n  templateUrl: 'merchant.html',\n})\nexport class MerchantPage {\n\n  pre: any;\n\n  accounts: any = [];\n  unmasked_accounts: any = [];\n  objectblock: any = {\n    username: '', account_from: '', lang: '', account_to: '', biller_ref: '',\n    ministry_name: '', refref: '', amount: '',\n  };\n  cname: string = \"\";\n  amount: string = \"\";\n  error: number = 0;\n  ispay: boolean = false;\n  avail: boolean = false;\n  unpaid: boolean = false;\n  langs: any = {};\n  allNavdata: any = {};\n  title: string = \"\";\n  merchantname: any = \"\";\n  merchantnumber: any = \"\";\n  constructor(public contactsProvider: ContactsProvider, public navCtrl: NavController, public globalVars: GlobalVarsProvider, public modalCtrl: ModalController,\n    public alertService: AlertServiceProvider, private clientdata: ClientdataProvider, public navParams: NavParams) {\n\n    this.langs = this.globalVars.doTranslate(this.globalVars.getLang());\n    this.objectblock.username = this.globalVars.Username;\n    this.accounts = globalVars.linked_acc;\n    this.objectblock.account_from = this.accounts[0].acc_number;\n    this.allNavdata = navParams.get('data');\n\n  }\n\n\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad CollectionPage');\n  }\n  goHome() {\n    this.navCtrl.setRoot('HomePage');\n  }\n  back() {\n    if (this.ispay) {\n      this.ispay = false;\n      this.objectblock.account_to = \"\";\n    } else\n      this.navCtrl.pop();\n  }\n  pickContact() {\n    this.objectblock.accountto = \"\";\n    this.contactsProvider.pickContact().then(contact => {\n      if (contact.phoneNo.length > 1) {\n        if (contact.phoneNo[0] == \"\" || contact.phoneNo[0] == undefined) {\n          this.alertService.mytoastdown(this.langs.valid_topup_number);\n        } else {\n          this.objectblock.account_to = contact.phoneNo[0];\n        }\n      }\n      else {\n        if (contact.phoneNo[0] == \"\" || contact.phoneNo[0] == undefined) {\n          this.alertService.mytoastdown(this.langs.valid_topup_number);\n        } else {\n          this.objectblock.account_to = contact.phoneNo[0];\n        }\n      }\n    });\n  }\n  enquire() {\n    if (this.objectblock.paybillnumber === null || this.objectblock.paybillnumber === '' || this.objectblock.paybillnumber === undefined) {\n      this.error = 1;\n    } else {\n      this.alertService.showLoading(this.langs.submitting_txt);\n      // this.clientdata.paymerchant( this.objectblock, this.allNavdata.url )\n\n      this.clientdata.paymerchant(this.objectblock)\n        .subscribe(data => {\n          data = this.globalVars.testdec(data);\n\n          if (data.length != 0) {\n            this.alertService.dismiss();\n            if (!data.error) {\n              this.pre = data;\n             \n\n\n           //   console.log(\"...................responsefrombackend........\", this.pre);\n\n              \n\n             // var person = {\"firstNamett\":\"John\", \"lastName\":\"Doe\", age:50, eyeColor:\"blue\"};\n             // var person =  this.pre.dera;    //  {\"merchantAccount\":\"0100026000\",\"businessName\":\"Grace Enterprise\"};      \n         //     {\"merchantAccount\":\"0100026000\",\"businessName\":\"Grace Enterprise\"}\n\n\n             // console.log(\"*********************this is testing*********\",person.merchantAccount);\n            \n\n            //  console.log(\".......................................\",dera);\n\n              //console.log(\".......................................\",dera.merchantAccount);\n\n            //  console.log(\"...................responsefrombackend........\", this.pre.dera.merchantAccount);\n              if (this.pre.status == '201') {\n                this.ispay = false;\n                this.alertService.errorPop(this.pre.field48);\n\n\n              } else {\n             //   var dera = this.pre.dera;\n            \n            // this.pre.replace('/r','/');\n             console.log(\"...................we are here........\", this.pre.dera);\n             ///{\"merchantAccount\":\"0100026000\",\"businessName\":\"Grace Enterprise\"}\n\n\n let dera2 =  JSON.parse(this.pre.dera);\n \n //this.objectblock.paybillnumber = this.objectblock.merchantnumber;\n\n this.objectblock.merchantname =  dera2.businessName;\n this.objectblock.merchantnumber =  dera2.merchantAccount;\n this.objectblock.merchantNo =  dera2.merchantNo;\n\n\n\n \n              /*  let message = \"Kindly confirm you want to make a payment to \" + this.objectblock.merchantname ;\n                let template = \"<div>\" + message + \"</div>\";\n                let obj = { body: \"\", template: template, ttype: \"\", completed: false, pageTo: '' };\n                let myModal = this.modalCtrl.create('ConfirmModalPage', obj);\n                myModal.present();\n                myModal.onDidDismiss(data => {\n                  if (data) { this.request(); }\n                });*/\n                this.objectblock.merchantname =  dera2.businessName;\n                this.objectblock.merchantnumber =  dera2.merchantAccount;\n                this.objectblock.merchantNo =  dera2.merchantNo;\n\n\n               \n               \n\n                this.ispay = true;\n                this.unpaid =true;\n\n                this.pre.full_payment = true;\n\n\n              }\n\n            } else if (data.error) {\n              this.alertService.errorPop(this.pre.field48);\n              this.alertService.errorPop(data.field48);\n            } else {\n              this.alertService.errorPop(this.pre.field48);\n              this.alertService.errorPop(this.langs.tech);\n            }\n          } else {\n            this.alertService.myLoadingDismiss();\n            this.alertService.errorPop(this.langs.tech);\n          }\n        }, err => {\n          console.log(err);\n          this.alertService.dismiss();\n          this.alertService.errorPop(this.langs.tech);\n        });\n    }\n  }\n /* submit() {\n\n\n    if (this.objectblock.account_from === null || this.objectblock.account_from === '') {\n      this.alertService.errorPop(this.langs.invalid_acc);\n    } else if (this.objectblock.amount === null || this.objectblock.amount === '') {\n\n      this.error = 4;\n\n    } else {\n\n   \n\n\n      let message = Format(this.langs.merchant_meso, this.objectblock, this.pre);\n      let template = \"<div>\" + message + \"</div>\";\n      let obj = { body: \"\", template: template, ttype: \"\", completed: false, pageTo: '' };\n      let myModal = this.modalCtrl.create('ConfirmModalPage', obj);\n      myModal.present();\n      myModal.onDidDismiss(data => {\n        if (data) {\n          this.request();\n        }\n        else { }\n      });\n    }\n  }*/\n\n  ionViewDidEnter() {\n    this.globalVars.reload();\n\n  }\n  submit() {\n\n    \n    if (this.objectblock.account_from === null || this.objectblock.account_from === '') {\n      this.alertService.errorPop(this.langs.invalid_acc);\n    } else if (this.objectblock.amount === null || this.objectblock.amount === '') {\n\n      this.error = 4;\n\n    } else {\n    this.alertService.showLoading(this.langs.submitting_txt);\n    this.clientdata.merchantft(this.objectblock)\n\n      .subscribe(data => {\n        data = this.globalVars.testdec(data);\n        console.log(data)\n        if (data.length != 0) {\n          this.alertService.dismiss();\n          if (!data.error) {\n            this.alertService.errorPop(data.field48);\n            this.navCtrl.pop();\n          } else if (data.error) {\n            this.alertService.errorPop(data.field48);\n            this.navCtrl.pop();\n          } else {\n            this.alertService.errorPop(this.langs.tech);\n            this.navCtrl.pop();\n          }\n        } else {\n          this.alertService.dismiss();\n          this.alertService.errorPop(this.langs.tech);\n          this.navCtrl.pop();\n        }\n      }, err => {\n        console.log(err);\n        this.alertService.dismiss();\n        this.alertService.errorPop(this.langs.tech);\n      });\n  }\n}\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/merchant/merchant.ts"],"sourceRoot":""}