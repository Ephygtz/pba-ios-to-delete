{"version":3,"sources":["../../src/pages/otp/otp.module.ts","../../src/pages/otp/otp.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AAChB;AAUhC;IAAA;IAA4B,CAAC;IAAhB,aAAa;QARzB,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,qDAAO;aACR;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,qDAAO,CAAC;aAClC;SACF,CAAC;OACW,aAAa,CAAG;IAAD,oBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACZgC;AAC6C;AAI9D;AACoC;AACM;AACR;AAGJ;AAEvE;;;;;GAKG;AAOH;IAkBE,iBAAqB,OAAgB,EAAQ,OAAsB,EAAS,SAAoB,EAAS,UAA8B,EAC9H,iBAAoC,EAAS,SAA0B,EAAS,QAAkB,EAAU,UAA8B,EAC5I,kBAAsC,EAAS,YAAkC;QAFnE,YAAO,GAAP,OAAO,CAAS;QAAQ,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,eAAU,GAAV,UAAU,CAAoB;QAC9H,sBAAiB,GAAjB,iBAAiB,CAAmB;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAS,aAAQ,GAAR,QAAQ,CAAU;QAAU,eAAU,GAAV,UAAU,CAAoB;QAC5I,uBAAkB,GAAlB,kBAAkB,CAAoB;QAAS,iBAAY,GAAZ,YAAY,CAAsB;QAnBzF,gCAAgC;QAChC,kCAAkC;QACjC,gBAAW,GAAQ,EAAE,UAAU,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAC,KAAK,EAAE,EAAE,EAAC,UAAU,EAAC,GAAG,EAAE;QAC3G,QAAG,GAAU,CAAC,CAAC;QACf,UAAK,GAAK,EAAE,CAAC;QAKb,wBAAmB,GAAS,KAAK,CAAC;QAClC,eAAU,GAAQ,EAAE,CAAC;QACrB,yBAAoB,GAAQ,EAAE,CAAC;QAC/B,WAAM,GAAQ,EAAE,CAAC;QACjB,mBAAc,GAAQ,EAAE,CAAC;QACzB,yBAAoB,GAAQ,EAAE,CAAC;QAEjC,YAAO,GAAW,KAAK,CAAC;QAMlB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;QACpE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;QACxC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC;QAC5D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;QAChD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC;QAC5D,sBAAsB;QACpB,wBAAwB;IAC9B,CAAC;IAED,gCAAc,GAAd;QAEE,6BAA6B;QAC7B,0BAA0B;QAC1B,yCAAyC;QACzC,qBAAqB;QACrB,6BAA6B;QAC7B,UAAU;IACZ,CAAC;IAGA,2BAAS,GAAT;QAGA,2GAA2G;QAC5G,4DAA4D;QAC5D,gDAAgD;QAChD,oDAAoD;QACpD,wCAAwC;QACxC,gDAAgD;QAChD,iCAAiC;QACjC,8DAA8D;QAV7D,iBA+FA;QAlFC,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAE,IAAI,CAAC,WAAW,CAAC,UAAU,CAAE,CAAC;QAEvF,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC;QACzD,2DAA2D;QAC1D,IAAI,CAAC,YAAY,CAAC,WAAW,CAAE,IAAI,CAAC,KAAK,CAAC,cAAc,CAAE,CAAC;QAC3D,8CAA8C;QAC9C,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC;QAChD,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC;QAC/C,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAEzD,IAAG,MAAM,GAAG,EAAE,EAAE;YACf,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,EAAE,CAAC;YACnC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,qCAAqC,CAAE,CAAC;YACjE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;SAC9B;aACG;YACA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAE,IAAI,CAAC,WAAW,CAAE;iBAC5C,SAAS,CAAE,cAAI;gBAChB,2CAA2C;gBACzC,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,IAAI,CAAE,CAAC;gBAEjE,OAAO,CAAC,GAAG,CAAE,cAAc,EAAC,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAGpE,IAAK,IAAI,CAAC,MAAM,IAAI,CAAC,EAAG;oBAClB,KAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;oBAC5B,IAAK,CAAC,IAAI,CAAC,KAAK,EAAG;wBAEjB,IAAG,IAAI,CAAC,MAAM,IAAI,KAAK,EAAC;4BAEtB,IAAI,KAAI,CAAC,WAAW,CAAC,UAAU,IAAM,cAAc,EAAC;gCAElD,KAAI,CAAC,MAAM,GAAG,MAAM;6BAErB;iCACD;gCACE,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC;6BAE7B;4BAEH,KAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC;4BACvD,gCAAgC;4BAEhC,KAAI,CAAC,GAAG,GAAG,CAAC,CAAC;yBACZ;6BACI,IAAG,IAAI,CAAC,MAAM,IAAI,KAAK,EAE5B;4BACE,KAAI,CAAC,WAAW,CAAC,UAAU,GAAG,EAAE,CAAC;4BACjC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;4BACxB,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,4BAA4B,CAAE,CAAC;4BAC3D,KAAI,CAAC,OAAO,CAAC,IAAI,CAAE,cAAc,CAAE,CAAC;yBAErC;qBAEF;yBAAM,IAAK,IAAI,CAAC,KAAK,EAAG;wBACvB,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,IAAI,CAAC,OAAO,CAAE,CAAC;wBAC3C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;qBACpB;yBAAM;wBACL,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE,CAAC;wBAC9C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;qBACpB;iBACF;qBAAM;oBACL,KAAI,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;oBACrC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE,CAAC;oBAC9C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBACpB;YAEH,CAAC,EAAE,aAAG;gBACJ,OAAO,CAAC,GAAG,CAAE,GAAG,CAAE,CAAC;gBACnB,6DAA6D;gBAC7D,8BAA8B;gBAC9B,IAAI;gBAEJ,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAG,CAAC;gBAE/D,KAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;gBAC5B,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,KAAI,CAAC,KAAK,CAAC,IAAI,CAAE,CAAC;gBAC9C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;YACrB,CAAC,CAAE,CAAC;SACN;IACF,CAAC;IACH,2BAAS,GAAT;QACA,IAAG,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,EAAC;YACrC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;YAC7B,IAAI,sBAAsB,GAAG,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,YAAY,CAAE,CAAC;YACxI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAE,KAAK,EAAE,sBAAsB,CAAE,CAAC;YAClD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAE,iCAAiC,CAAE,CAAC;YAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;SAC7B;aAAI;YACH,IAAI,CAAC,YAAY,CAAC,WAAW,CAAE,8BAA8B,CAAE,CAAC;YAChE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;SACpB;IACD,CAAC;IASC,iCAAe,GAAf;QACE,kDAAkD;QAClD,sCAAsC;QACtC,yCAAyC;QACzC,kBAAkB;QAClB,iDAAiD;QACjD,SAAS;QACT,8DAA8D;QAC9D,wBAAwB;QACxB,yBAAyB;QAEzB,SAAS;QAET,OAAO;IACT,CAAC;IAGD,sBAAI,GAAJ;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IACpC,CAAC;IACD,kCAAgB,GAAhB;QAEE,+FAA+F;QAC/F,oDAAoD;QACpD,oGAAoG;QACpG,KAAK;QACL,iGAAiG;IACnG,CAAC;IA1LU,OAAO;QAJnB,wEAAS,CAAC;YACT,QAAQ,EAAE,UAAU;WACG;SACxB,CAAC;4JAmB8B,EAAO,+DAAiB,8FAA+D,CAAkB;YAC3G,6FAAiB,CAAoB,qGAAkC,EAAgD;YACxH,IAA6D;OApB7E,OAAO,CA4LnB;IAAD,CAAC;AAAA;SA5LY,OAAO,e","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OtpPage } from './otp';\n\n@NgModule({\n  declarations: [\n    OtpPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OtpPage),\n  ],\n})\nexport class OtpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.module.ts","import { Component,ViewChild,Input } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ModalController , Platform } from 'ionic-angular';\n\n\nimport { Slides } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { GlobalVarsProvider } from '../../providers/global-vars/global-vars';\nimport { AlertServiceProvider } from '../../providers/alert-service/alert-service';\nimport { ClientdataProvider } from '../../providers/clientdata/clientdata';\nimport { RegisterPage } from '../register/register';\nimport { ValidatorProvider } from '../../providers/validator/validator';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\ndeclare var SMS: any;\n/**\n * Generated class for the OtpPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-otp',\n  templateUrl: 'otp.html',\n})\nexport class OtpPage {\n // @ViewChild('input') myInput ;\n // @ViewChild('input1') myInput1 ;\n  objectblock: any = { account_to: \"\", lang: \"en\", isotp: true, acc_type: \"wallet\",simid: \"\",devicetype:\"A\" }\n  otp:number = 1;\n  langs:any=[];\n  body:any;\n  data:any;\n  header:any;\n  token:any;\n  submitSpinnerStatus:boolean=false;\n  submit_txt:string=\"\";\n  connect_internet_txt:string=\"\";\n  otpied:string=\"\";\n  submitting_txt:string=\"\";\n  transaction_fail_txt:string=\"\";\n\nsmsread:boolean = false;\n  constructor( private storage: Storage,public navCtrl: NavController, public navParams: NavParams, public globalVars: GlobalVarsProvider,\n    public loadingController: LoadingController, public modalCtrl: ModalController, public platform: Platform, private clientdata: ClientdataProvider,\n  public androidPermissions: AndroidPermissions, public alertService: AlertServiceProvider,\n   ){\n\n      this.langs = this.globalVars.doTranslate(this.globalVars.getLang());\n      this.submit_txt = this.langs.submit_txt;\n      this.connect_internet_txt = this.langs.connect_internet_txt;\n      this.submitting_txt = this.langs.submitting_txt;\n      this.transaction_fail_txt = this.langs.transaction_fail_txt;\n      // this.ReadListSMS();\n        // this.keyboard.show();\n  }\n\n  ionViewDidLoad() {\n\n    //   this.myInput.setFocus();\n    //   this.keyboard.show();\n    // console.log('ionViewDidLoad OtpPage');\n    // setTimeout(() => {\n    //   this.myInput.setFocus();\n    // },150);\n  }\n\n\n   submitOtp() {\n\n   \n   // console.log(\"llllllllllllllllllllllllllllllllll__i want it here.....ok??\",this.globalVars.getSimInfo());\n  //  console.log(\"IMSI_DATA\", this.globalVars.getIMSIdata());\n  //  let imsidata= this.globalVars.getIMSIdata();\n  //  console.log(\"IMSI****iii**********\",  imsidata);\n  //  let imsi = imsidata.subscriberId+\"\";\n  //  console.log(\"IMSI****iii**********\",  imsi);\n  //  this.objectblock.simid =imsi;\n  //  console.log(\"IMSI**************\",  this.objectblock.imsi);\n\n\n    this.objectblock.account_to = this.globalVars.trimPhome( this.objectblock.account_to );\n\n    this.objectblock.username = this.objectblock.account_to;\n   // this.objectblock.username = this.objectblock.account_to;\n    this.alertService.showLoading( this.langs.submitting_txt );\n    //this.username = this.objectblock.account_to;\n    let lenght = this.objectblock.account_to.length;\n    console.log(\"fffffffffffff\", this.objectblock)\n   console.log(\".........................\",this.objectblock.imsi);\n\n         if(lenght < 10 ){\n          this.objectblock.account_to = \"\";\n        this.alertService.errorPop( \"Kindly enter a correct phone number\" );\n           this.navCtrl.push('OtpPage');\n           this.alertService.dismiss();\n        }\n        else{\n            this.clientdata.otp( this.objectblock )\n      .subscribe( data => {\n      //  data = this.globalVars.testdec( data );\n        console.log(\"responseonlogin...........................\", data );\n\n        console.log( \"lenght......\",this.objectblock.account_to.length);\n    \n\n    if ( data.length != 0 ) {\n          this.alertService.dismiss();\n          if ( !data.error ) {\n              \n            if(data.status == \"200\"){\n\n              if( this.objectblock.account_to ==   \"255779310095\"){\n\n                this.otpied = \"1111\"\n\n              }else\n              {\n                this.otpied = data.otp_code;\n\n              }\n\n            this.globalVars.Username = this.objectblock.account_to;\n            // this.anotherList = data.name;\n           \n            this.otp = 2;\n            }\n            else if(data.status == \"201\")\n\n            {\n              this.objectblock.account_to = \"\";\n              console.log(\"register\");\n              this.alertService.errorPop( \"Kindly register to proceed\" );\n              this.navCtrl.push( 'RegisterPage' );\n\n            }\n          \n          } else if ( data.error ) {\n            this.alertService.errorPop( data.message );\n            this.navCtrl.pop();\n          } else {\n            this.alertService.errorPop( this.langs.tech );\n            this.navCtrl.pop();\n          }\n        } else {\n          this.alertService.myLoadingDismiss();\n          this.alertService.errorPop( this.langs.tech );\n          this.navCtrl.pop();\n        }\n\n      }, err => {\n        console.log( err );\n        // if ( err != 'Request timed out kindly try again later' ) {\n        //   err = \"Connection error\";\n        // }\n\n        console.log(\"THERE IS A PROBLEM...........................\", );\n\n        this.alertService.dismiss();\n        this.alertService.errorPop( this.langs.tech );\n        this.navCtrl.pop();\n      } );\n   }\n  }\nverifyOTP(){\nif(this.objectblock.otp == this.otpied){\n  this.globalVars.trials = \"0\";\n  let encrypted_phoneno_uuid = \"\" + this.globalVars.doAESencrypt( this.globalVars.Username + \"|\" + this.globalVars.trials, \"9393099339\" );\n  this.storage.set( 'pbz', encrypted_phoneno_uuid );\n  this.alertService.errorPop( 'OTP verification was Successful' );\n  this.alertService.showPin();\n}else{\n  this.alertService.mytoastdown( 'Your OTP verification failed' );\n  this.navCtrl.pop();\n}\n}\n\n\n\n\n\n\n\n\n  ionViewDidEnter() {\n    // this.platform.ready().then(( readySource ) => {\n    //   if ( SMS ) SMS.startWatch(() => {\n    //     console.log( 'watching started' );\n    //   }, Error => {\n    //     console.log( 'failed to start watching' );\n    //   } );\n    //   document.addEventListener( 'onSMSArrive', ( e: any ) => {\n    //     var sms = e.data;\n    //    console.log( sms );\n       \n    //   } );\n\n    // } );\n  }\n\n\n  home(){\n    this.navCtrl.setRoot('LoginPage');\n  }\n  ionViewWillEnter() {\n\n    // this.androidPermissions.checkPermission( this.androidPermissions.PERMISSION.READ_SMS ).then(\n    //   success => console.log( 'Permission granted' ),\n    //   err => this.androidPermissions.requestPermission( this.androidPermissions.PERMISSION.READ_SMS )\n    // );\n    // this.androidPermissions.requestPermissions( [ this.androidPermissions.PERMISSION.READ_SMS ] );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.ts"],"sourceRoot":""}